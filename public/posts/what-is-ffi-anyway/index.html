<!DOCTYPE html>
<html lang="en-gb">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>mattischrome/posts/what-is-ffi-anyway/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://mattischrome.com/hugo-theme-console/css/terminal-0.7.2.min.css">
    <link rel="stylesheet" href="https://mattischrome.com/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://mattischrome.com/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="What is FFI anyway?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mattischrome.com/posts/what-is-ffi-anyway/" /><meta property="article:published_time" content="2022-02-03T00:00:00+00:00" />



<meta name="twitter:title" content="What is FFI anyway?"/>
<meta name="twitter:description" content="At the moment I can’t compile this blog locally because my ruby-ffi install is somehow wrong and is preventing Jekyll from running on my recently upgraded Mac system. Fortunately the site still compiles on Netlify, or else you wouldn’t be reading this!
It’s always annoying when you rely on a complex multi-part system and some obscure part fails. It leaves you groping for answers and inventing unnecessary hack solutions. The dreaded old Stack Overflow rabbit hole. FFI stands for Foreign Function Interface, a mechanism that allows code written in one language to be called by another language."/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://mattischrome.com/" class="no-style ">mattischrome</a>:~# 
              <a href='https://mattischrome.com/posts'>posts</a>/<a href='https://mattischrome.com/posts/what-is-ffi-anyway'>what-is-ffi-anyway</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container " >
        
<h1>What is FFI anyway?</h1>
<p>Feb. 3, 2022</p>
<br/><br/>
<p>At the moment I can’t compile this blog locally because my <code>ruby-ffi</code> install is somehow wrong and is preventing Jekyll from running on my recently upgraded Mac system. Fortunately the site still compiles on Netlify, or else you wouldn’t be reading this!</p>
<p>It’s always annoying when you rely on a complex multi-part system and some obscure part fails. It leaves you groping for answers and inventing unnecessary hack solutions. The dreaded old Stack Overflow rabbit hole. FFI stands for <a href="https://en.wikipedia.org/wiki/Foreign_function_interface">Foreign Function Interface</a>, a mechanism that allows code written in one language to be called by another language.</p>
<p>In Ruby, this functionality is encapsulated in <code>ruby-ffi</code> gem. This is the one that keeps on breaking for me. There are a great many places where using code written in other programming languages alongside Ruby would be useful in a static site generator like Jekyll. When looking at where Jekyll depended on  <code>ruby-ffi</code>, the first dependency I found was a gem that reads in HTML documents and understands their structure - presumably code that had already been written in a fast and open source way in a language like Java or C.</p>
<p>So why doesn’t it want to run on M1? Most solutions suggest to force install the x64 version which can then be run with Rosetta. I’m loathe to try this though, as it might be I get stuck with a suboptimal version of <code>ruby-ffi</code> going forward<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. That said, Jekyll seems pretty moribund at this point, and so it might be worth experimenting just to get the local build working. My qualms aren’t going to matter if I’m going to use a more modern tool like <a href="https://www.11ty.dev" title="Link to the Eleventy website"> Eleventy</a> in the future.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>I suppose one would forcibly uninstall the x64 <code>ruby-ffi</code> and then reinstall the arm64 version.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

 
<ul class="post_tags">
   <li>
    <a href="https://mattischrome.com/tags/ruby/">ruby</a>
  </li> <li>
    <a href="https://mattischrome.com/tags/ffi/">ffi</a>
  </li> <li>
    <a href="https://mattischrome.com/tags/programming/">programming</a>
  </li> <li>
    <a href="https://mattischrome.com/tags/learning-new-things/">learning-new-things</a>
  </li> <li>
    <a href="https://mattischrome.com/tags/twenty-two/">twenty-two</a>
  </li></ul>

<div aria-label="Browse" class="post-single__browse browse-nav">
    
    <div class="browse-nav__next">
      <div aria-hidden="true" class="browse-nav__symbol browse-nav__symbol--next">
        &#10142;
      </div>
      <a href="https://mattischrome.com/posts/understated-classics-39/" class="browse-nav__link browse-nav__link--next" aria-label="Next article: Understated Classics #39: Lifeforms by Future Sound of London">Understated Classics #39: Lifeforms by Future Sound of London</a>
    </div>
    
  
    
    <div class="browse-nav__prev">
      <div aria-hidden="true" class="browse-nav__symbol browse-nav__symbol--prev">
        &#10142;
      </div>
      <a href="https://mattischrome.com/posts/second-february-post/" class="browse-nav__link browse-nav__link--prev" aria-label="Previous article: A February Project">A February Project</a>
    </div>
    
  
    <a href="https://mattischrome.com/" class="browse-nav__home"><span aria-hidden="true">&larrb;</span> Back to home page</a>
</div>

        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
