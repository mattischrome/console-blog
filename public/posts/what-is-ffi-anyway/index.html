<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">



<title>
  What is FFI anyway? · mattischrome
</title>


<link rel="stylesheet" type="text/css" href="/css/navbar.css">
<link rel="stylesheet" type="text/css" href="/css/colours.css">
<link rel="stylesheet" type="text/css" href="/css/fonts.css">
<link rel="stylesheet" type="text/css" href="/css/default.css">

<link rel="stylesheet" type="text/css" href="/css/pygments.css">


<link rel="stylesheet" type="text/css" href="/css/sidenotes.css">



  
</head>
<body>
  <div class="navbar-space">
    <div id="navigation" class="no-print">
    <div class="menu menu-open">
      <a href="/" class="menu-heading menu-title">
        Blog<br>
        <span class="menu-subtitle">mattischrome</span>
      </a>
      <ul>
        
        <li><a href="/about/">About</a></li>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/posts/">Posts</a></li>
        
        <li><a href="/tags/">Tags</a></li>
        
        
      </ul>
    </div>
  </div>
    
    
    
  </div>
  
  <div class="text-space">
    <div id="content">
      



<h1>What is FFI anyway?</h1>


<article>
  <p class="header">
    
    Posted on 2022-02-03
    
    
    &thinsp;·&thinsp; <span title="293 words">2 min read</span> &thinsp;·&nbsp;
    
    
    
  <a title="All pages tagged 'Ruby'." href="/tags/ruby" rel="tag">Ruby</a>
    
    &thinsp;·&thinsp;
  <a title="All pages tagged 'FFI'." href="/tags/ffi" rel="tag">FFI</a>
    
    &thinsp;·&thinsp;
  <a title="All pages tagged 'Programming'." href="/tags/programming" rel="tag">Programming</a>
    
    &thinsp;·&thinsp;
  <a title="All pages tagged 'Learning new things'." href="/tags/learning-new-things" rel="tag">Learning new things</a>
    
    &thinsp;·&thinsp;
  <a title="All pages tagged 'Twenty Two'." href="/tags/twenty-two" rel="tag">Twenty Two</a>
    
  </p>
  
  <section>
    
    

    
    <p>At the moment I can’t compile this blog locally because my <code>ruby-ffi</code> install is somehow wrong and is preventing Jekyll from running on my recently upgraded Mac system. Fortunately the site still compiles on Netlify, or else you wouldn’t be reading this!</p>
<p>It’s always annoying when you rely on a complex multi-part system and some obscure part fails. It leaves you groping for answers and inventing unnecessary hack solutions. The dreaded old Stack Overflow rabbit hole. FFI stands for <a href="https://en.wikipedia.org/wiki/Foreign_function_interface">Foreign Function Interface</a>, a mechanism that allows code written in one language to be called by another language.</p>
<p>In Ruby, this functionality is encapsulated in <code>ruby-ffi</code> gem. This is the one that keeps on breaking for me. There are a great many places where using code written in other programming languages alongside Ruby would be useful in a static site generator like Jekyll. When looking at where Jekyll depended on  <code>ruby-ffi</code>, the first dependency I found was a gem that reads in HTML documents and understands their structure - presumably code that had already been written in a fast and open source way in a language like Java or C.</p>
<p>So why doesn’t it want to run on M1? Most solutions suggest to force install the x64 version which can then be run with Rosetta. I’m loathe to try this though, as it might be I get stuck with a suboptimal version of <code>ruby-ffi</code> going forward<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. That said, Jekyll seems pretty moribund at this point, and so it might be worth experimenting just to get the local build working. My qualms aren’t going to matter if I’m going to use a more modern tool like <a href="https://www.11ty.dev" title="Link to the Eleventy website"> Eleventy</a> in the future.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>I suppose one would forcibly uninstall the x64 <code>ruby-ffi</code> and then reinstall the arm64 version.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  </section>

  
  

  <h3>See Also</h3>
  <ul>
   
     <li><a href="/posts/second-february-post/">A February Project</a></li>
   
     <li><a href="/posts/first-of-feb-post/">Checking In</a></li>
   
     <li><a href="/posts/understated-classics-or-not/">Understated Classics Or Not?</a></li>
   
     <li><a href="/posts/a-little-lesson-in-r/">A Little Lesson in R</a></li>
   
     <li><a href="/posts/personal-ggplot-tips-and-tweaks/">Personal ggplot tips and tweaks</a></li>
   
  </ul>

  
  
</article>
<div aria-label="Browse" class="post-single__browse browse-nav">
    
    <div class="browse-nav__next">
      <div aria-hidden="true" class="browse-nav__symbol browse-nav__symbol--next">
        &#10142;
      </div>
      <a href="http://localhost:1313/posts/understated-classics-39/" class="browse-nav__link browse-nav__link--next" aria-label="Next article: Understated Classics #39: Lifeforms by Future Sound of London">Understated Classics #39: Lifeforms by Future Sound of London</a>
    </div>
    
  
    
    <div class="browse-nav__prev">
      <div aria-hidden="true" class="browse-nav__symbol browse-nav__symbol--prev">
        &#10142;
      </div>
      <a href="http://localhost:1313/posts/second-february-post/" class="browse-nav__link browse-nav__link--prev" aria-label="Previous article: A February Project">A February Project</a>
    </div>
    
  
    <a href="http://localhost:1313/" class="browse-nav__home"><span aria-hidden="true">&larrb;</span> Back to home page</a>
</div>


    </div>
    
<div id="footer">
    
    <a id="to-top" href="#">top</a>
    
    
    
    
    <a href="/about">About</a>
    
  </div>
  </div>
</body>
</html>
